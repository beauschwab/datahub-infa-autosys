---
# Secret: DataHub Credentials
#
# This Secret stores sensitive credentials used by the ingestion sources.
# Values are base64-encoded by Kubernetes automatically when using kubectl.
#
# Usage:
#   # Create from literals (recommended)
#   kubectl create secret generic datahub-credentials \
#     --from-literal=INFA_PASSWORD='your_informatica_password' \
#     --from-literal=ORACLE_PASSWORD='your_oracle_password' \
#     --from-literal=ESSBASE_PASSWORD='your_essbase_password' \
#     -n airflow
#
#   # Or apply this file (after replacing base64 values)
#   kubectl apply -f secret-credentials.yaml -n airflow
#
# The DAG injects these as environment variables via:
#   env:
#     - name: INFA_PASSWORD
#       valueFrom:
#         secretKeyRef:
#           name: datahub-credentials
#           key: INFA_PASSWORD

apiVersion: v1
kind: Secret
metadata:
  name: datahub-credentials
  namespace: airflow
  labels:
    app: datahub-ingestion
    component: credentials
type: Opaque
data:
  # Base64-encoded credentials
  # Replace these with your actual base64-encoded values:
  #   echo -n 'your_password' | base64
  
  INFA_PASSWORD: "REPLACE_WITH_BASE64_ENCODED_PASSWORD"
  ORACLE_PASSWORD: "REPLACE_WITH_BASE64_ENCODED_PASSWORD"
  ESSBASE_PASSWORD: "REPLACE_WITH_BASE64_ENCODED_PASSWORD"

# ─────────────────────────────────────────────────────────────────────────────
# Security Best Practices
# ─────────────────────────────────────────────────────────────────────────────
#
# 1. Use external secret management (recommended):
#    - AWS Secrets Manager + External Secrets Operator
#    - HashiCorp Vault + Vault Secrets Operator
#    - Google Secret Manager + External Secrets Operator
#
# 2. Enable RBAC to restrict access to this Secret
#
# 3. Use sealed-secrets for GitOps-friendly secret management:
#    https://github.com/bitnami-labs/sealed-secrets
#
# 4. Rotate credentials regularly
#
# 5. Audit secret access via Kubernetes audit logs
